set $mod Mod4

font pango:System San Francisco Display, Font Awesome 15

set $bg-color 	         #101010 
set $bg-color-darker     #000000 
set $inactive-bg-color   #101010 
set $text-color          #ffffff 
set $inactive-text-color #666666 
set $urgent-bg-color     #e84f4f

# Monitor names
set $laptop-monitor   LVDS1
set $external-monitor DP1

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec xterm

# start ranger
bindsym $mod+Shift+Return exec xterm ranger

# kill focused window
bindsym $mod+Shift+q kill

# start rofi
bindsym $mod+d exec rofi -show run

# screenshots
bindsym --release $mod+Print exec import png:- | xclip -selection clipboard -t image/png

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+Ctrl+h split h

# split in vertical orientation
bindsym $mod+Ctrl+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# workspace names
set $ws1  "1 "
set $ws2  "2 "
set $ws3  "3 "
set $ws4  "4 "
set $ws5  "5 "
set $ws6  "6 "
set $ws7  "7 "
set $ws8  "8 "
set $ws9  "9 "
set $ws10 "10 "

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# assign workspaces to monitors
workspace $ws1  output $external-monitor
workspace $ws2  output $external-monitor
workspace $ws3  output $external-monitor
workspace $ws4  output $external-monitor
workspace $ws5  output $external-monitor
workspace $ws6  output $external-monitor
workspace $ws7  output $laptop-monitor
workspace $ws8  output $laptop-monitor
workspace $ws9  output $laptop-monitor
workspace $ws10 output $laptop-monitor

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1,  workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2,  workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3,  workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4,  workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5,  workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6,  workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7,  workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8,  workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9,  workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10, workspace $ws10

# assign programs to workspaces
for_window [class="Brave-browser"] move container to workspace $WS1, workspace $WS1, focus
for_window [class="jetbrains-pycharm-ce"] move container to workspace $WS5, workspace $WS5, focus
for_window [title="dovydas@debian.*"] move container to workspace $WS2, workspace $WS2, focus
for_window [title="^ranger$"] move container to workspace $WS3, workspace $WS3, focus
for_window [title="^xterm$"] move container to workspace $WS3, workspace $WS3, focus
for_window [title=".*- VIM"] move container to workspace $WS4, workspace $WS4, focus
for_window [title="blkrn.*"] move container to workspace $WS3, workspace $WS3, focus
for_window [class="Gimp"] move container to workspace $WS6, workspace $WS6, focus
for_window [class="okular"] move container to workspace $WS8, workspace $WS8, focus
for_window [class="Spotify"] move container to workspace $WS9, workspace $WS9, focus
for_window [class="zoom"] move container to workspace $WS10, workspace $WS10, focus, layout stacked
for_window [class="Skype"] move container to workspace $WS10, workspace $WS10, focus, layout stacked
for_window [class="Microsoft Teams - Preview"] move container to workspace $WS10, workspace $WS10, focus, layout stacked
for_window [class="WxWabbitemu"] floating enable

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

# window colors
#                       border              background         text                 indicator
client.focused          $text-color         $text-color        $bg-color            $text-color 
client.unfocused        $inactive-bg-color  $inactive-bg-color $inactive-text-color $text-color  
client.focused_inactive $bg-color-darker    $bg-color-darker   $inactive-text-color $text-color 
client.urgent           $urgent-bg-color    $urgent-bg-color   $text-color          $text-color 

# bar
bar {
  	status_command i3blocks -c /home/dovydas/.config/i3/i3blocks.conf
        font pango:System San Francisco Display, Font Awesome 16
	colors {
		background $bg-color
	        separator  $inactive-text-color
                statusline $inactive-text-color
		#                  border             background         text
		focused_workspace  $bg-color          $bg-color          $text-color
		active_workspace   $bg-color-darker   $bg-color-darker   $inactive-text-color
		inactive_workspace $inactive-bg-color $inactive-bg-color $inactive-text-color
		urgent_workspace   $urgent-bg-color   $urgent-bg-color   $text-color
	}
}

# Disable focus following mouse
focus_follows_mouse no

# resize window (you can also use the mouse for that)
mode "resize" {
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt
        
        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# lock
bindsym $mod+Shift+x exec i3lock-fancy-dualmonitor

# mount/unmount USB
bindsym $mod+u exec udiskie-mount /dev/sdb && cd /media/dovydas && xterm ranger
bindsym $mod+Shift+u exec udiskie-umount /dev/sdb && notify-send -t 3000 "/dev/sdb unmounted"

# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec amixer -q -D pulse sset Master 5%+ && pkill -RTMIN+1 i3blocks
bindsym XF86AudioLowerVolume exec amixer -q -D pulse sset Master 5%- && pkill -RTMIN+1 i3blocks
bindsym XF86AudioMute exec amixer -q -D pulse sset Master toggle && pkill -RTMIN+1 i3blocks

# Disconnect monitor
bindsym $mod+Shift+d exec xrandr --output $external-monitor --off

# Reconnect monitor
bindsym $mod+Ctrl+d exec xrandr --output $external-monitor --primary --mode 1920x1080 --pos 0x0 --rotate normal --output $laptop-monitor --mode 1366x768 --pos 1920x128 --rotate normal
 
# Sreen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 10 # increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec 10 # decrease screen brightness
bindsym XF86Favorites exec xbacklight -inc 10 # decrease screen brightness
bindsym XF86Explorer exec xbacklight -dec 10 # decrease screen brightness

# Launch browser
bindsym XF86HomePage exec sensible-browser 
bindsym XF86Mail exec sensible-browseR HTTPS://outlook.office.com/owa/?realm=live.ucl.ac.uk#path=/mail 

# Touchpad controls
bindsym XF86TouchpadToggle exec /some/path/toggletouchpad.sh # toggle touchpad

# Media player controls
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioStop exec playerctl stop
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# dual monitor setup
exec xrandr --output $external-monitor --primary --mode 1920x1080 --pos 0x0 --rotate normal --output $laptop-monitor --mode 1366x768 --pos 1920x128 --rotate normal

# set desktop background
exec_always feh --bg-fill ~/Pictures/Wallpapers/sierra-nevada-yosemite-national-park-autumn-river.jpg

# update terminal output
exec_always "xrdb ~/.Xresources"

# enable numlock on startup
exec_always --no-startup-id numlockx on

# enable transparency
exec_always compton

# launch programs on startup
exec nm-applet

# hide cursor after 1 second
exec_always "unclutter -idle 1 -notclass Brave-browser"

# run syncthing in background
exec_always "syncthing -no-browser"

# use GB and LT keyboards
exec_always "setxkbmap -layout gb,lt -option grp:alt_shift_toggle"

# prevent monitor from going blank
exec_always "xset s off -dpms"

# restart i3 to resolve issues
exec i3 restart
